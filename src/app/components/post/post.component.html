<div [ngClass]="{ 'flex-view': isFlex, container: !isFlex }">
  <div [ngClass]="{ 'first-div': isFlex }">
    <div class="user-div" *ngIf="!isFlex">
      <div class="img-user-div">
        <div class="img-div">
          <img
            *ngIf="post.user?.image"
            src="http://localhost:3000/uploads/{{ post.user?.image }}"
            alt="user-image"
          />
          <mat-icon *ngIf="!post.user?.image">person_outlined</mat-icon>
        </div>
        <span style="font-weight: bold">{{ post.user?.username }}</span>
      </div>
      <div style="display: flex; gap: 0.5em; align-items: center">
        <div class="like-div">
          <div class="likes-div">
            <span>{{ post.likesNumber }} </span> Likes
          </div>
          <mat-icon (click)="likePostfn()" *ngIf="!isLiked"
            >favorite_outlined</mat-icon
          >
          <mat-icon
            (click)="unLikePostfn()"
            style="color: var(--negative-reaction)"
            *ngIf="isLiked"
            >favorite</mat-icon
          >
        </div>
        <div class="language-div">
          <span class="indicator"></span>
          <span>{{ post.language }}</span>
        </div>
      </div>
    </div>
    <div class="code-div">
      <app-highlight-code
        [language]="post.language"
        [code]="post.code"
      ></app-highlight-code>
    </div>
  </div>
  <div [ngClass]="{ 'second-div': isFlex }">
    <div class="user-div" *ngIf="isFlex">
      <div class="img-user-div">
        <div class="img-div">
          <img
            *ngIf="post.user?.image"
            src="http://localhost:3000/uploads/{{ post.user?.image }}"
            alt="user-image"
          />
          <mat-icon *ngIf="!post.user?.image">person_outlined</mat-icon>
        </div>
        <span style="font-weight: bold">{{ post.user?.username }}</span>
      </div>
      <div style="display: flex; gap: 0.5em; align-items: center">
        <div class="like-div">
          <div class="likes-div">
            <span>{{ post.likesNumber }} </span> Likes
          </div>
          <mat-icon (click)="likePostfn()" *ngIf="!isLiked"
            >favorite_outlined</mat-icon
          >
          <mat-icon
            (click)="unLikePostfn()"
            style="color: var(--negative-reaction)"
            *ngIf="isLiked"
            >favorite</mat-icon
          >
        </div>
        <div class="language-div">
          <span class="indicator"></span>
          <span>{{ post.language }}</span>
        </div>
      </div>
    </div>
    <div class="description-div">
      <div class="text-div">
        <span class="title">{{ post.title }}</span>
        <span class="text">{{ cutDescription }}</span>
        <span (click)="openDescription()" class="show-more">
          {{
            isTruncated === true || post.description.length < maxLength
              ? ""
              : "more"
          }}</span
        >
      </div>
    </div>
    <app-comments
      [isFlex]="isFlex"
      [postId]="post.id!"
      [reactionsCount]="post.reactionsNumber"
    ></app-comments>
  </div>
</div>
